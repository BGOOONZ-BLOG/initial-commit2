<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>reduce_of_empty_array_with_no_initial_value</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="typeerror-reduce-of-empty-array-with-no-initial-value">TypeError: Reduce of empty array with no initial value</h1>
<p>The JavaScript exception "reduce of empty array with no initial value‚Äù occurs when a reduce function is used.</p>
<h2 id="message">Message</h2>
<pre><code>TypeError: reduce of empty array with no initial value</code></pre>
<h2 id="error-type">Error type</h2>
<p><a href="../global_objects/typeerror"><code>TypeError</code></a></p>
<h2 id="what-went-wrong">What went wrong?</h2>
<p>In JavaScript, there are several reduce functions:</p>
<ul>
<li><a href="../global_objects/array/reduce"><code>Array.prototype.reduce()</code></a>, <a href="../global_objects/array/reduceright"><code>Array.prototype.reduceRight()</code></a> and</li>
<li><a href="../global_objects/typedarray/reduce"><code>TypedArray.prototype.reduce()</code></a>, <a href="../global_objects/typedarray/reduceright"><code>TypedArray.prototype.reduceRight()</code></a>).</li>
</ul>
<p>These functions optionally take an <code>initialValue</code> (which will be used as the first argument to the first call of the <code>callback</code>). However, if no initial value is provided, it will use the first element of the <a href="../global_objects/array"><code>Array</code></a> or <a href="../global_objects/typedarray"><code>TypedArray</code></a> as the initial value. This error is raised when an empty array is provided because no initial value can be returned in that case.</p>
<h2 id="examples">Examples</h2>
<h3 id="invalid-cases">Invalid cases</h3>
<p>This problem appears frequently when combined with a filter (<a href="../global_objects/array/filter"><code>Array.prototype.filter()</code></a>, <a href="../global_objects/typedarray/filter"><code>TypedArray.prototype.filter()</code></a>) which will remove all elements of the list. Thus leaving none to be used as the initial value.</p>
<pre><code>var ints = [0, -1, -2, -3, -4, -5];
ints.filter(x =&gt; x &gt; 0)         // removes all elements
    .reduce((x, y) =&gt; x + y)    // no more elements to use for the initial value.</code></pre>
<p>Similarly, the same issue can happen if there is a typo in a selector, or an unexpected number of elements in a list:</p>
<pre><code>var names = document.getElementsByClassName(&quot;names&quot;);
var name_list = Array.prototype.reduce.call(names, (acc, name) =&gt; acc + &quot;, &quot; + name);</code></pre>
<h3 id="valid-cases">Valid cases</h3>
<p>These problems can be solved in two different ways.</p>
<p>One way is to actually provide an <code>initialValue</code> as the neutral element of the operator, such as 0 for the addition, 1 for a multiplication, or an empty string for a concatenation.</p>
<pre><code>var ints = [0, -1, -2, -3, -4, -5];
ints.filter(x =&gt; x &gt; 0)         // removes all elements
    .reduce((x, y) =&gt; x + y, 0) // the initial value is the neutral element of the addition</code></pre>
<p>Another way would be to handle the empty case, either before calling <code>reduce</code>, or in the callback after adding an unexpected dummy initial value.</p>
<pre><code>var names = document.getElementsByClassName(&quot;names&quot;);

var name_list1 = &quot;&quot;;
if (names1.length &gt;= 1)
  name_list1 = Array.prototype.reduce.call(names, (acc, name) =&gt; acc + &quot;, &quot; + name);
// name_list1 == &quot;&quot; when names is empty.

var name_list2 = Array.prototype.reduce.call(names, (acc, name) =&gt; {
  if (acc == &quot;&quot;) // initial value
    return name;
  return acc + &quot;, &quot; + name;
}, &quot;&quot;);
// name_list2 == &quot;&quot; when names is empty.</code></pre>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="../global_objects/array/reduce"><code>Array.prototype.reduce()</code></a></li>
<li><a href="../global_objects/array/reduceright"><code>Array.prototype.reduceRight()</code></a></li>
<li><a href="../global_objects/typedarray/reduce"><code>TypedArray.prototype.reduce()</code></a></li>
<li><a href="../global_objects/typedarray/reduceright"><code>TypedArray.prototype.reduceRight()</code></a></li>
<li><a href="../global_objects/array"><code>Array</code></a></li>
<li><a href="../global_objects/typedarray"><code>TypedArray</code></a></li>
<li><a href="../global_objects/array/filter"><code>Array.prototype.filter()</code></a></li>
<li><a href="../global_objects/typedarray/filter"><code>TypedArray.prototype.filter()</code></a></li>
</ul>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Reduce_of_empty_array_with_no_initial_value" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Reduce_of_empty_array_with_no_initial_value</a></p>
</body>
</html>
