<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>charcodeat</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="string.prototype.charcodeat">String.prototype.charCodeAt()</h1>
<p>The <code>charCodeAt()</code> method returns an integer between <code>0</code> and <code>65535</code> representing the UTF-16 code unit at the given index.</p>
<p>The UTF-16 code unit matches the Unicode code point for code points which can be represented in a single UTF-16 code unit. If the Unicode code point cannot be represented in a single UTF-16 code unit (because its value is greater than <code>0xFFFF</code>) then the code unit returned will be <em>the first part of a surrogate pair</em> for the code point. If you want the entire code point value, use <a href="codepointat"><code>codePointAt()</code></a>.</p>
<h2 id="syntax">Syntax</h2>
<pre><code>charCodeAt(index)</code></pre>
<h3 id="parameters">Parameters</h3>
<p><code>index</code><br />
An integer greater than or equal to <code>0</code> and less than the <code>length</code> of the string. If <code>index</code> is not a number, it defaults to <code>0</code>.</p>
<h3 id="return-value">Return value</h3>
<p>A number representing the UTF-16 code unit value of the character at the given <code>index</code>. If <code>index</code> is out of range, <code>charCodeAt()</code> returns <a href="../nan"><code>NaN</code></a>.</p>
<h2 id="description">Description</h2>
<p>Unicode code points range from <code>0</code> to <code>1114111</code> (<code>0x10FFFF</code>). The first 128 Unicode code points are a direct match of the ASCII character encoding. (For information on Unicode, see the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types#unicode">JavaScript Guide</a>.)</p>
<p><strong>Note:</strong> <code>charCodeAt()</code> will always return a value that is less than <code>65536</code>. This is because the higher code points are represented by <em>a pair</em> of (lower valued) "surrogate‚Äù pseudo-characters which are used to comprise the real character.</p>
<p>Because of this, in order to examine (or reproduce) the full character for individual character values of <code>65536</code> or greater, for such characters, it is necessary to retrieve not only <code>charCodeAt(i)</code>, but also <code>charCodeAt(i+1)</code> (as if manipulating a string with two letters), or to use <code>codePointAt(i)</code> instead. See examples 2 and 3 (below).</p>
<p><code>charCodeAt()</code> returns <a href="../nan"><code>NaN</code></a> if the given index is less than <code>0</code>, or if it is equal to or greater than the <code>length</code> of the string.</p>
<p>Backward compatibility: In historic versions (like JavaScript 1.2) the <code>charCodeAt()</code> method returns a number indicating the ISO-Latin-1 codeset value of the character at the given index. The ISO-Latin-1 codeset ranges from <code>0</code> to <code>255</code>. The first <code>0</code> to <code>127</code> are a direct match of the ASCII character set.</p>
<h2 id="examples">Examples</h2>
<h3 id="using-charcodeat">Using charCodeAt()</h3>
<p>The following example returns <code>65</code>, the Unicode value for A.</p>
<pre><code>&#39;ABC&#39;.charCodeAt(0)  // returns 65</code></pre>
<h3 id="fixing-charcodeat-to-handle-non-basic-multilingual-plane-characters-if-their-presence-earlier-in-the-string-is-unknown">Fixing charCodeAt() to handle non-Basic-Multilingual-Plane characters if their presence earlier in the string is unknown</h3>
<p>This version might be used in for loops and the like when it is unknown whether non-BMP characters exist before the specified index position.</p>
<pre><code>function fixedCharCodeAt(str, idx) {
  // ex. fixedCharCodeAt(&#39;\uD800\uDC00&#39;, 0); // 65536
  // ex. fixedCharCodeAt(&#39;\uD800\uDC00&#39;, 1); // false
  idx = idx || 0;
  var code = str.charCodeAt(idx);
  var hi, low;

  // High surrogate (could change last hex to 0xDB7F
  // to treat high private surrogates
  // as single characters)
  if (0xD800 &lt;= code &amp;&amp; code &lt;= 0xDBFF) {
    hi = code;
    low = str.charCodeAt(idx + 1);
    if (isNaN(low)) {
      throw &#39;High surrogate not followed by &#39; +
        &#39;low surrogate in fixedCharCodeAt()&#39;;
    }
    return (
      (hi - 0xD800) * 0x400) +
      (low - 0xDC00) + 0x10000;
  }
  if (0xDC00 &lt;= code &amp;&amp; code &lt;= 0xDFFF) { // Low surrogate
    // We return false to allow loops to skip
    // this iteration since should have already handled
    // high surrogate above in the previous iteration
    return false;
    // hi = str.charCodeAt(idx - 1);
    // low = code;
    // return ((hi - 0xD800) * 0x400) +
    //   (low - 0xDC00) + 0x10000;
  }
  return code;
}</code></pre>
<h3 id="fixing-charcodeat-to-handle-non-basic-multilingual-plane-characters-if-their-presence-earlier-in-the-string-is-known">Fixing charCodeAt() to handle non-Basic-Multilingual-Plane characters if their presence earlier in the string is known</h3>
<pre><code>function knownCharCodeAt(str, idx) {
  str += &#39;&#39;;
  var code,
      end = str.length;

  var surrogatePairs = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g;
  while ((surrogatePairs.exec(str)) != null) {
    var li = surrogatePairs.lastIndex;
    if (li - 2 &lt; idx) {
      idx++;
    }
    else {
      break;
    }
  }

  if (idx &gt;= end || idx &lt; 0) {
    return NaN;
  }

  code = str.charCodeAt(idx);

  var hi, low;
  if (0xD800 &lt;= code &amp;&amp; code &lt;= 0xDBFF) {
    hi = code;
    low = str.charCodeAt(idx + 1);
    // Go one further, since one of the &quot;characters&quot;
    // is part of a surrogate pair
    return ((hi - 0xD800) * 0x400) +
      (low - 0xDC00) + 0x10000;
  }
  return code;
}</code></pre>
<h2 id="specifications">Specifications</h2>
<table>
<thead>
<tr class="header">
<th>
Specification
</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>
<p><a href="https://tc39.es/ecma262/#sec-string.prototype.charcodeat">ECMAScript Language Specification (ECMAScript) <br/></p>
<span class="small">#sec-string.prototype.charcodeat</span></a>
</td>
</tr>
</tbody>
</table>
<p><code>charCodeAt</code></p>
<p>1</p>
<p>12</p>
<p>1</p>
<p>4</p>
<p>4</p>
<p>1</p>
<p>1</p>
<p>18</p>
<p>4</p>
<p>10.1</p>
<p>1</p>
<p>1.0</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="fromcharcode"><code>String.fromCharCode()</code></a></li>
<li><a href="charat"><code>String.prototype.charAt()</code></a></li>
<li><a href="fromcodepoint"><code>String.fromCodePoint()</code></a></li>
<li><a href="codepointat"><code>String.prototype.codePointAt()</code></a></li>
</ul>
<p>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br />
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt</a></p>
</body>
</html>
