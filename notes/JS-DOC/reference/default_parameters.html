<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>default_parameters</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="default-parameters">Default parameters</h1>
<p><strong>Default function parameters</strong> allow named parameters to be initialized with default values if no value or <code>undefined</code> is passed.</p>
<h2 id="syntax">Syntax</h2>
<pre><code>function fnName(param1 = defaultValue1, ..., paramN = defaultValueN) { ... }</code></pre>
<h2 id="description">Description</h2>
<p>In JavaScript, function parameters default to <a href="../global_objects/undefined"><code>undefined</code></a>. However, it’s often useful to set a different default value. This is where default parameters can help.</p>
<p>In the past, the general strategy for setting defaults was to test parameter values in the function body and assign a value if they are <code>undefined</code>.</p>
<p>In the following example, if no value is provided for <code>b</code> when <code>multiply</code> is called, <code>b</code>’s value would be <code>undefined</code> when evaluating <code>a * b</code> and <code>multiply</code> would return <code>NaN</code>.</p>
<pre><code>function multiply(a, b) {
  return a * b
}

multiply(5, 2)  // 10
multiply(5)     // NaN !</code></pre>
<p>To guard against this, something like the second line would be used, where <code>b</code> is set to <code>1</code> if <code>multiply</code> is called with only one argument:</p>
<pre><code>function multiply(a, b) {
  b = (typeof b !== &#39;undefined&#39;) ?  b : 1
  return a * b
}

multiply(5, 2)  // 10
multiply(5)     // 5</code></pre>
<p>With default parameters in ES2015, checks in the function body are no longer necessary. Now, you can assign <code>1</code> as the default value for <code>b</code> in the function head:</p>
<pre><code>function multiply(a, b = 1) {
  return a * b
}

multiply(5, 2)          // 10
multiply(5)             // 5
multiply(5, undefined)  // 5</code></pre>
<h2 id="examples">Examples</h2>
<h3 id="passing-undefined-vs.-other-falsy-values">Passing <code>undefined</code> vs. other falsy values</h3>
<p>In the second call in this example, even if the first argument is set explicitly to <code>undefined</code> (though not <code>null</code> or other <a href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy">falsy</a> values), the value of the <code>num</code> argument is still the default.</p>
<pre><code>function test(num = 1) {
  console.log(typeof num)
}

test()           // &#39;number&#39; (num is set to 1)
test(undefined)  // &#39;number&#39; (num is set to 1 too)

// test with other falsy values:
test(&#39;&#39;)         // &#39;string&#39; (num is set to &#39;&#39;)
test(null)       // &#39;object&#39; (num is set to null)</code></pre>
<h3 id="evaluated-at-call-time">Evaluated at call time</h3>
<p>The default argument is evaluated at <em>call time</em>. So, unlike (for example) Python, a new object is created each time the function is called.</p>
<pre><code>function append(value, array = []) {
  array.push(value)
  return array
}

append(1)  // [1]
append(2)  // [2], not [1, 2]</code></pre>
<p>This even applies to functions and variables:</p>
<pre><code>function callSomething(thing = something()) {
  return thing
}

let numberOfTimesCalled = 0
function something() {
  numberOfTimesCalled += 1
  return numberOfTimesCalled
}

callSomething()  // 1
callSomething()  // 2</code></pre>
<h3 id="earlier-parameters-are-available-to-later-default-parameters">Earlier parameters are available to later default parameters</h3>
<p>Parameters defined earlier (to the left) are available to later default parameters:</p>
<pre><code>function greet(name, greeting, message = greeting + &#39; &#39; + name) {
  return [name, greeting, message]
}

greet(&#39;David&#39;, &#39;Hi&#39;)                     // [&quot;David&quot;, &quot;Hi&quot;, &quot;Hi David&quot;]
greet(&#39;David&#39;, &#39;Hi&#39;, &#39;Happy Birthday!&#39;)  // [&quot;David&quot;, &quot;Hi&quot;, &quot;Happy Birthday!&quot;]</code></pre>
<p>This functionality can be approximated like this, which demonstrates how many edge cases are handled:</p>
<pre><code>function go() {
  return &#39;:P&#39;
}

function withDefaults(a, b = 5, c = b, d = go(), e = this,
                      f = arguments, g = this.value) {
  return [a, b, c, d, e, f, g]
}

function withoutDefaults(a, b, c, d, e, f, g) {
  switch (arguments.length) {
    case 0:
      a;
    case 1:
      b = 5;
    case 2:
      c = b;
    case 3:
      d = go();
    case 4:
      e = this;
    case 5:
      f = arguments;
    case 6:
      g = this.value;
    default:
  }
  return [a, b, c, d, e, f, g];
}

withDefaults.call({value: &#39;=^_^=&#39;});
// [undefined, 5, 5, &quot;:P&quot;, {value:&quot;=^_^=&quot;}, arguments, &quot;=^_^=&quot;]

withoutDefaults.call({value: &#39;=^_^=&#39;});
// [undefined, 5, 5, &quot;:P&quot;, {value:&quot;=^_^=&quot;}, arguments, &quot;=^_^=&quot;]</code></pre>
<h3 id="scope-effects">Scope Effects</h3>
<p>If default parameters are defined for one or more parameter, then a <a href="https://tc39.es/ecma262/#sec-functiondeclarationinstantiation">second scope</a> (Environment Record) is created, specifically for the identifiers within the parameter list. This scope is a parent of the scope created for the function body.</p>
<p>This means that functions and variables declared in the function body cannot be referred to from default value parameter initializers; attempting to do so throws a run-time <a href="../global_objects/referenceerror"><code>ReferenceError</code></a>.</p>
<p>It also means that variables declared inside the function body using <code>var</code> will mask parameters of the same name, instead of the usual behavior of duplicate <code>var</code> declarations having no effect.</p>
<p>The following function will throw a <code>ReferenceError</code> when invoked, because the default parameter value does not have access to the child scope of the function body:</p>
<pre><code>function f(a = go()) { // Throws a `ReferenceError` when `f` is invoked.
  function go() { return &#39;:P&#39; }
}</code></pre>
<p>…and this function will print <code>undefined</code> because variable <code>var a</code> is hoisted only to the top of the scope created for the function body (and not the parent scope created for the parameter list):</p>
<pre><code>function f(a, b = () =&gt; console.log(a)) {
  var a = 1
  b() // Prints `undefined`, because default parameter values exist in their own scope
}</code></pre>
<h3 id="parameters-without-defaults-after-default-parameters">Parameters without defaults after default parameters</h3>
<p>Parameters are still set left-to-right, overwriting default parameters even if there are later parameters without defaults.</p>
<pre><code>function f(x = 1, y) {
  return [x, y]
}

f()   // [1, undefined]
f(2)  // [2, undefined]</code></pre>
<h3 id="destructured-parameter-with-default-value-assignment">Destructured parameter with default value assignment</h3>
<p>You can use default value assignment with the <a href="../operators/destructuring_assignment">destructuring assignment</a> notation:</p>
<pre><code>function f([x, y] = [1, 2], {z: z} = {z: 3}) {
  return x + y + z
}

f()  // 6</code></pre>
<h2 id="specifications">Specifications</h2>
<table>
<thead>
<tr class="header">
<th>
Specification
</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>
<p><a href="https://tc39.es/ecma262/#sec-function-definitions">ECMAScript Language Specification (ECMAScript) <br/></p>
<span class="small">#sec-function-definitions</span></a>
</td>
</tr>
</tbody>
</table>
<p><code>Default_parameters</code></p>
<p>49</p>
<p>14</p>
<p>15</p>
<p>No</p>
<p>36</p>
<p>10</p>
<p>49</p>
<p>49</p>
<p>15</p>
<p>36</p>
<p>10</p>
<p>5.0</p>
<p><code>destructured_parameter_with_default_value_assignment</code></p>
<p>49</p>
<p>14</p>
<p>41</p>
<p>No</p>
<p>36</p>
<p>10</p>
<p>49</p>
<p>49</p>
<p>41</p>
<p>36</p>
<p>10</p>
<p>5.0</p>
<p><code>parameters_without_defaults_after_default_parameters</code></p>
<p>49</p>
<p>14</p>
<p>26</p>
<p>No</p>
<p>36</p>
<p>10</p>
<p>49</p>
<p>49</p>
<p>26</p>
<p>36</p>
<p>10</p>
<p>5.0</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="http://wiki.ecmascript.org/doku.php?id=harmony:parameter_default_values">Original proposal at ecmascript.org</a></li>
</ul>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters</a></p>
</body>
</html>
