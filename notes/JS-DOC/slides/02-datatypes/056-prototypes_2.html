<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Prototypes (2)</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Prototypes (2)</h1>
</header>
<p>Now we know what prototypes are, but not what they <em>do</em> or which problem they solve.</p>
<h2 id="what-does-a-prototype-do">What does a prototype do?</h2>
<p>Prototypes come in play when we are accessing the property of an object.</p>
<div class="callout">
<p>Whenver an object property is accessed, the object and its prototype chain are traversed until the property is found. If the end of the prototype chain is reached without finding the property, <code>undefined</code> is returned.</p>
</div>
<p>Consider the following structure:</p>
<div class="ascii">
<pre><code>┌───────────────────────┐
│           a           │
├───────────────┬───────┤
│ name          │ &quot;Tom&quot; │
├───────────────┼───────┤
│ [[Prototype]] │   ◆───┼───┐
└───────────────┴───────┘   │
                            ▼
                ┌───────────────────────┐
                │           b           │
                ├───────────────┬───────┤
                │ name          │ &quot;Joe&quot; │
                ├───────────────┼───────┤
                │ age           │   42  │
                ├───────────────┼───────┤
                │ [[Prototype]] │   ◆───┼───┐
                └───────────────┴───────┘   │
                                            ▼
                                ┌───────────────────────┐
                                │           c           │
                                ├───────────────┬───────┤
                                │ height        │  180  │
                                ├───────────────┼───────┤
                                │ [[Prototype]] │  null │
                                └───────────────┴───────┘</code></pre>
</div>
<p>These are the results for accessing different properties on A:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="va">a</span>.<span class="at">name</span><span class="op">;</span> <span class="co">// Tom        `a` itself has this property, it shadows `b.name`</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="va">a</span>.<span class="at">age</span><span class="op">;</span> <span class="co">// 42         `a`&#39;s prototype has this property</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="va">a</span>.<span class="at">height</span><span class="op">;</span> <span class="co">// 180        `a`&#39;s prototype&#39;s prototype has this property</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="va">a</span>.<span class="at">eyeColor</span><span class="op">;</span> <span class="co">// undefined  this property doesn&#39;t exist</span></a></code></pre></div>
<hr />
<p>This is also the reason why we can access <code>.toString()</code> on almost every object: It is defined in <code>Object.prototype</code>, which sits at the end of every prototype chain.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">var</span> user <span class="op">=</span> <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;Tom&#39;</span> <span class="op">};</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="va">user</span>.<span class="at">toString</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">// &quot;[object Object]&quot;</span></a></code></pre></div>
<div class="callout primary">
<p><strong>Note</strong>: <em>Assignments</em> to properties will (almost) always create or update a property on object itself, even if a property with the same name already exists in the prototype chain. The property in the prototype chain is then <em>shadowed</em>, similar to variable shadowing in scopes.</p>
</div>
</body>
</html>
