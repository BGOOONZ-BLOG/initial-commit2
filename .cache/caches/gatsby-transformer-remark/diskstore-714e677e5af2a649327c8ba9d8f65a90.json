{"expireTime":9007200903816788000,"key":"transformer-remark-markdown-html-ast-d4c25156da9a0510f02d57a9bf0dfa3b--","val":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"AJAX and APIs - React","position":{"start":{"line":2,"column":3,"offset":4},"end":{"line":2,"column":24,"offset":25}}}],"position":{"start":{"line":2,"column":1,"offset":2},"end":{"line":2,"column":24,"offset":25}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Excerpt","position":{"start":{"line":4,"column":6,"offset":34},"end":{"line":4,"column":13,"offset":41}}}],"position":{"start":{"line":4,"column":3,"offset":31},"end":{"line":4,"column":13,"offset":41}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A JavaScript library for building user interfaces","position":{"start":{"line":6,"column":3,"offset":48},"end":{"line":6,"column":52,"offset":97}}}],"position":{"start":{"line":6,"column":3,"offset":48},"end":{"line":6,"column":52,"offset":97}}},{"type":"text","value":"\n"}],"position":{"start":{"line":4,"column":1,"offset":29},"end":{"line":6,"column":52,"offset":97}}},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[],"position":{"start":{"line":8,"column":1,"offset":101},"end":{"line":8,"column":4,"offset":104}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://reactjs.org/docs/lists-and-keys.html#how-can-i-make-an-ajax-call"},"children":[],"position":{"start":{"line":10,"column":5,"offset":112},"end":{"line":10,"column":81,"offset":188}}},{"type":"text","value":"How can I make an AJAX call?","position":{"start":{"line":10,"column":81,"offset":188},"end":{"line":10,"column":109,"offset":216}}}],"position":{"start":{"line":10,"column":1,"offset":108},"end":{"line":10,"column":109,"offset":216}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can use any AJAX library you like with React. Some popular ones are ","position":{"start":{"line":12,"column":1,"offset":220},"end":{"line":12,"column":73,"offset":292}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/axios/axios"},"children":[{"type":"text","value":"Axios","position":{"start":{"line":12,"column":74,"offset":293},"end":{"line":12,"column":79,"offset":298}}}],"position":{"start":{"line":12,"column":73,"offset":292},"end":{"line":12,"column":112,"offset":331}}},{"type":"text","value":", ","position":{"start":{"line":12,"column":112,"offset":331},"end":{"line":12,"column":114,"offset":333}}},{"type":"element","tagName":"a","properties":{"href":"https://api.jquery.com/jQuery.ajax/"},"children":[{"type":"text","value":"jQuery AJAX","position":{"start":{"line":12,"column":115,"offset":334},"end":{"line":12,"column":126,"offset":345}}}],"position":{"start":{"line":12,"column":114,"offset":333},"end":{"line":12,"column":164,"offset":383}}},{"type":"text","value":", and the browser built-in ","position":{"start":{"line":12,"column":164,"offset":383},"end":{"line":12,"column":191,"offset":410}}},{"type":"element","tagName":"a","properties":{"href":"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"},"children":[{"type":"text","value":"window.fetch","position":{"start":{"line":12,"column":192,"offset":411},"end":{"line":12,"column":204,"offset":423}}}],"position":{"start":{"line":12,"column":191,"offset":410},"end":{"line":12,"column":265,"offset":484}}},{"type":"text","value":".","position":{"start":{"line":12,"column":265,"offset":484},"end":{"line":12,"column":266,"offset":485}}}],"position":{"start":{"line":12,"column":1,"offset":220},"end":{"line":12,"column":266,"offset":485}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://reactjs.org/docs/lists-and-keys.html#where-in-the-component-lifecycle-should-i-make-an-ajax-call"},"children":[],"position":{"start":{"line":14,"column":5,"offset":493},"end":{"line":14,"column":113,"offset":601}}},{"type":"text","value":"Where in the component lifecycle should I make an AJAX call?","position":{"start":{"line":14,"column":113,"offset":601},"end":{"line":14,"column":173,"offset":661}}}],"position":{"start":{"line":14,"column":1,"offset":489},"end":{"line":14,"column":173,"offset":661}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You should populate data with AJAX calls in the ","position":{"start":{"line":16,"column":1,"offset":665},"end":{"line":16,"column":49,"offset":713}}},{"type":"element","tagName":"a","properties":{"href":"https://reactjs.org/docs/react-component.html#mounting"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"componentDidMount"}],"position":{"start":{"line":16,"column":50,"offset":714},"end":{"line":16,"column":69,"offset":733}}}],"position":{"start":{"line":16,"column":49,"offset":713},"end":{"line":16,"column":126,"offset":790}}},{"type":"text","value":" lifecycle method. This is so you can use ","position":{"start":{"line":16,"column":126,"offset":790},"end":{"line":16,"column":168,"offset":832}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"setState"}],"position":{"start":{"line":16,"column":168,"offset":832},"end":{"line":16,"column":178,"offset":842}}},{"type":"text","value":" to update your component when the data is retrieved.","position":{"start":{"line":16,"column":178,"offset":842},"end":{"line":16,"column":231,"offset":895}}}],"position":{"start":{"line":16,"column":1,"offset":665},"end":{"line":16,"column":231,"offset":895}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://reactjs.org/docs/lists-and-keys.html#example-using-ajax-results-to-set-local-state"},"children":[],"position":{"start":{"line":18,"column":5,"offset":903},"end":{"line":18,"column":99,"offset":997}}},{"type":"text","value":"Example: Using AJAX results to set local state","position":{"start":{"line":18,"column":99,"offset":997},"end":{"line":18,"column":145,"offset":1043}}}],"position":{"start":{"line":18,"column":1,"offset":899},"end":{"line":18,"column":145,"offset":1043}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The component below demonstrates how to make an AJAX call in ","position":{"start":{"line":20,"column":1,"offset":1047},"end":{"line":20,"column":62,"offset":1108}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"componentDidMount"}],"position":{"start":{"line":20,"column":62,"offset":1108},"end":{"line":20,"column":81,"offset":1127}}},{"type":"text","value":" to populate local component state.","position":{"start":{"line":20,"column":81,"offset":1127},"end":{"line":20,"column":116,"offset":1162}}}],"position":{"start":{"line":20,"column":1,"offset":1047},"end":{"line":20,"column":116,"offset":1162}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The example API returns a JSON object like this:","position":{"start":{"line":22,"column":1,"offset":1166},"end":{"line":22,"column":49,"offset":1214}}}],"position":{"start":{"line":22,"column":1,"offset":1166},"end":{"line":22,"column":49,"offset":1214}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"{\n  \"items\": [\n    { \"id\": 1, \"name\": \"Apples\",  \"price\": \"$2\" },\n    { \"id\": 2, \"name\": \"Peaches\", \"price\": \"$5\" }\n  ]\n}\n"}],"position":{"start":{"line":24,"column":1,"offset":1218},"end":{"line":31,"column":4,"offset":1356}}}],"position":{"start":{"line":24,"column":1,"offset":1218},"end":{"line":31,"column":4,"offset":1356}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"class MyComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: null,\n            isLoaded: false,\n            items: []\n        };\n    }\n\n    componentDidMount() {\n        fetch('https://api.example.com/items')\n            .then((res) => res.json())\n            .then(\n                (result) => {\n                    this.setState({\n                        isLoaded: true,\n                        items: result.items\n                    });\n                },\n\n                (error) => {\n                    this.setState({\n                        isLoaded: true,\n                        error\n                    });\n                }\n            );\n    }\n\n    render() {\n        const { error, isLoaded, items } = this.state;\n        if (error) {\n            return <div>Error: {error.message}</div>;\n        } else if (!isLoaded) {\n            return <div>Loading...</div>;\n        } else {\n            return (\n                <ul>\n                    {items.map((item) => (\n                        <li key={item.id}>\n                            {item.name} {item.price}\n                        </li>\n                    ))}\n                </ul>\n            );\n        }\n    }\n}\n"}],"position":{"start":{"line":33,"column":1,"offset":1360},"end":{"line":83,"column":4,"offset":2677}}}],"position":{"start":{"line":33,"column":1,"offset":1360},"end":{"line":83,"column":4,"offset":2677}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Here is the equivalent with ","position":{"start":{"line":85,"column":1,"offset":2681},"end":{"line":85,"column":29,"offset":2709}}},{"type":"element","tagName":"a","properties":{"href":"https://reactjs.org/docs/hooks-intro.html"},"children":[{"type":"text","value":"Hooks","position":{"start":{"line":85,"column":30,"offset":2710},"end":{"line":85,"column":35,"offset":2715}}}],"position":{"start":{"line":85,"column":29,"offset":2709},"end":{"line":85,"column":79,"offset":2759}}},{"type":"text","value":":","position":{"start":{"line":85,"column":79,"offset":2759},"end":{"line":85,"column":80,"offset":2760}}}],"position":{"start":{"line":85,"column":1,"offset":2681},"end":{"line":85,"column":80,"offset":2760}}},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[],"position":{"start":{"line":87,"column":1,"offset":2764},"end":{"line":87,"column":4,"offset":2767}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"function MyComponent() {\n    const [error, setError] = useState(null);\n    const [isLoaded, setIsLoaded] = useState(false);\n    const [items, setItems] = useState([]);\n\n    useEffect(() => {\n        fetch('https://api.example.com/items')\n            .then((res) => res.json())\n            .then(\n                (result) => {\n                    setIsLoaded(true);\n                    setItems(result);\n                },\n\n                (error) => {\n                    setIsLoaded(true);\n                    setError(error);\n                }\n            );\n    }, []);\n\n    if (error) {\n        return <div>Error: {error.message}</div>;\n    } else if (!isLoaded) {\n        return <div>Loading...</div>;\n    } else {\n        return (\n            <ul>\n                {items.map((item) => (\n                    <li key={item.id}>\n                        {item.name} {item.price}\n                    </li>\n                ))}\n            </ul>\n        );\n    }\n}\n"}],"position":{"start":{"line":90,"column":1,"offset":2773},"end":{"line":130,"column":4,"offset":3788}}}],"position":{"start":{"line":90,"column":1,"offset":2773},"end":{"line":130,"column":4,"offset":3788}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":131,"column":1,"offset":3790}}}}