<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>creatingimmutableobjectsinnativejavascript</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<hr />
<h1 id="creating-immutable-objects-in-native-javascript">Creating immutable objects in native JavaScript</h1>
<p>Javascript it’s a flexible language, you can redefine anything. But when projects get complex we find problems with mutable data structures. With the latest versions of JavaScript this situation changed. Now it’s possible to create immutable objects. I’ll walk you through how to do it in three different ways.</p>
<h3 id="wait-what-means-immutable">Wait, what means immutable?</h3>
<blockquote>
<p>Immutability in object means we don’t want our objects to change in any ways once we create them i.e make them read-only type.</p>
</blockquote>
<p>Let’s suppose we need to define a car <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a> and use its properties to perform operations throughout our entire project. We can’t allow modifying by mistake any data.</p>
<pre><code>const myTesla = {
    maxSpeed: 250,
    batteryLife: 300,
    weight: 023
};</code></pre>
<h2 id="object.preventextensions"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions">Object.preventExtensions()</a></h2>
<p>This method prevents the addition of new properties to our existing object. <code>preventExtensions()</code> is a irreversible operation. We can never add extra properties to the object again.</p>
<pre><code>Object.isExtensible(myTesla); // true
Object.preventExtensions(myTesla);
Object.isExtensible(myTesla); // false
myTesla.color = &#39;blue&#39;;
console.log(myTesla.color) // undefined</code></pre>
<h2 id="object.seal"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/seal">Object.seal()</a></h2>
<p>It prevents additions or deletion of properties. <code>seal()</code> also prevents the modification of property descriptors.</p>
<pre><code>Object.isSealed(myTesla); // false
Object.seal(myTesla);
Object.isSealed(myTesla); // true

myTesla.color = &#39;blue&#39;;
console.log(myTesla.color); // undefined

delete myTesla.batteryLife; // false
console.log(myTesla.batteryLife); // 300

Object.defineProperty(myTesla, &#39;batteryLife&#39;); // TypeError: Cannot redefine property: batteryLife</code></pre>
<h2 id="object.freeze"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze">Object.freeze()</a></h2>
<p>It does the same that <code>Object.seal()</code> plus it makes the properties non-writable.</p>
<pre><code>Object.isFrozen(myTesla); // false
Object.freeze(myTesla);
Object.isFrozen(myTesla); // true

myTesla.color = &#39;blue&#39;;
console.log(myTesla.color); // undefined

delete myTesla.batteryLife;
console.log(myTesla.batteryLife); // 300

Object.defineProperty(myTesla, &#39;batteryLife&#39;); // TypeError: Cannot redefine property: batteryLife

myTesla.batteryLife = 400;
console.log(myTesla.batteryLife); // 300</code></pre>
<h2 id="extra">Extra</h2>
<p>Use <code>strict mode</code> if you want to throw an error when trying to modify an immutable object.</p>
</body>
</html>
