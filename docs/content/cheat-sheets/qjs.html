<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Q.js</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Q.js</h1>
</header>
<h3 id="creating-promises-q.promise">Creating promises (Q.promise)</h3>
<pre><code>Q.promise (ok, fail) =&gt;
  asyncFunction -&gt;
    if error
      fail new Error(&quot;Failure&quot;)
    else
      ok(data)</code></pre>
<h3 id="for-arrays">For arrays</h3>
<pre><code>promises = [saveDisk(), saveCloud()]

# When all succeeds, or *at least one* error
Q.all(promises).done -&gt;
  alert &quot;Saved&quot;

# Same, but get the values
Q.all(promises).spread (a, b) -&gt;
  alert &quot;Result A:&quot; + a
  alert &quot;Result B:&quot; + b

# When all either succeeds or errors
Q.allSettled(promises).done -&gt; ...</code></pre>
<h3 id="creating-promises-from-node">Creating promises from Node</h3>
<pre><code># Works like .call() or .apply()

Q.nfcall(FS.readFile, &#39;foo.txt&#39;, &#39;utf-8&#39;)
.then -&gt; ...

Q.nfapply(FS.readFile, [&#39;foo.txt&#39;, &#39;utf-8&#39;])
.then -&gt; ...

Q.npost(FS, &#39;readFile&#39;, [&#39;foo.txt, &#39;utf-8&#39;])
.then -&gt; ...

Q.npost(FS, &#39;readFile&#39;, &#39;foo.txt, &#39;utf-8&#39;)
.then -&gt; ...

readFile = Q.denodeify(FS.readFile)
readFile(&#39;foo.txt&#39;).then -&gt; ...</code></pre>
<h3 id="promises-to-node-async">Promises to Node async</h3>
<pre><code>createUser = (next) -&gt;
  promiseMaker()
  .nodeify(next)</code></pre>
<h3 id="promise-sugars">Promise sugars</h3>
<pre><code># Shortcut for .then(ok, fail, progress)
promise
.then (data) -&gt;
.catch (err) -&gt;
.progress (percent) -&gt;</code></pre>
<h3 id="try">Try</h3>
<p>Q.try -&gt; promise()</p>
<p>.catch (e) -&gt; console.error "Oh well‚Äù, e</p>
<h3 id="reference">Reference</h3>
<ul>
<li>https://github.com/kriskowal/q/wiki/API-Reference</li>
</ul>
</body>
</html>
