<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>avoidmodifyingorpassingargumentsintootherfunctions—itkills</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<p>title: Avoid modifying or passing <code>arguments</code> into other functions — it kills optimization tip-number: 31 tip-username: berkana tip-username-profile: https://github.com/berkana tip-tldr: Within JavaScript functions, the variable name <code>arguments</code> lets you access all of the arguments passed to the function. <code>arguments</code> is an <em>array-like object</em>; <code>arguments</code> can be accessed using array notation, and it has the <em>length</em> property, but it doesn’t have many of the built-in methods that arrays have such as <code>filter</code> and <code>map</code> and <code>forEach</code>. Because of this, it is a fairly common practice to convert <code>arguments</code> into an array using the following snipet</p>
<ul>
<li>/en/avoid-modifying-or-passing-arguments-into-other-functions-it-kills-optimization/</li>
</ul>
<p>###Background</p>
<p>Within JavaScript functions, the variable name <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments"><code>arguments</code></a> lets you access all of the arguments passed to the function. <code>arguments</code> is an <em>array-like object</em>; <code>arguments</code> can be accessed using array notation, and it has the <em>length</em> property, but it doesn’t have many of the built-in methods that arrays have such as <code>filter</code> and <code>map</code> and <code>forEach</code>. Because of this, it is a fairly common practice to convert <code>arguments</code> into an array using the following:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">var</span> args <span class="op">=</span> <span class="va">Array</span>.<span class="va">prototype</span>.<span class="va">slice</span>.<span class="at">call</span>(<span class="kw">arguments</span>)<span class="op">;</span></a></code></pre></div>
<p>This calls the <code>slice</code> method from the <code>Array</code> prototype, passing it <code>arguments</code>; the <code>slice</code> method returns a shallow copy of <code>arguments</code> as a new array object. A common shorthand for this is :</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">var</span> args <span class="op">=</span> [].<span class="va">slice</span>.<span class="at">call</span>(<span class="kw">arguments</span>)<span class="op">;</span></a></code></pre></div>
<p>In this case, instead of calling <code>slice</code> from the <code>Array</code> prototype, it is simply being called from an empty array literal.</p>
<p>###Optimization</p>
<p>Unfortunately, passing <code>arguments</code> into any function call will cause the V8 JavaScript engine used in Chrome and Node to skip optimization on the function that does this, which can result in considerably slower performance. See this article on <a href="https://github.com/petkaantonov/bluebird/wiki/Optimization-killers">optimization killers</a>. Passing <code>arguments</code> to any other function is known as <em>leaking <code>arguments</code></em>.</p>
<p>Instead, if you want an array of the arguments that lets you use you need to resort to this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">var</span> args <span class="op">=</span> <span class="kw">new</span> <span class="at">Array</span>(<span class="kw">arguments</span>.<span class="at">length</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="va">args</span>.<span class="at">length</span><span class="op">;</span> <span class="op">++</span>i) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">    args[i] <span class="op">=</span> <span class="kw">arguments</span>[i]<span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>Yes it is more verbose, but in production code, it is worth it for the performance optimization.</p>
</body>
</html>
